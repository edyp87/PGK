Zadanie 4: Symulacja idącego/biegnącego tłumu
(Terminy: pon:9.XII, czw:5.XII) 25 punktów (po modyfikacjach)

Celem zadania jest wyświetlenie animacji grupy idących/biegnących ludzi z możliwością przełączania widoków.
Animacja Postaci: Części ciała rysujemy schematycznie z odcinków/prostopadłościanów/elipsoid. Celem programu jest stosowanie hierarchiczne przekształceń układów współrzędnych tak aby większość części ciała rysować przy pomocy jednego bufora zawierającego np. elipsoidę. Przechodząc do kolejnych części np. nogi należy zmieniać układ współrzędnych np. przez przesunięcie i obrót mnożąc bieżącą macierz modelowania M przez macierz danego przekształcenia. Do tego potrzebujemy osobnych 3 macierzy M,V,P (modelowania, widoku, rzutowania). Do shadera możemy oczywiście przekazywać jeden iloczyn tych trzech macierzy. Poprzednią macierz M warto pamiętać (np. aby po narysowaniu jednej nogi wrócić do tułowia i przejść do drugiej nogi) dlatego warto zrobić sobie prosty stos macierzy (w starym OpenGL mieliśmy funkcje PushMatrix/PopMatrix). Ważne aby przemyśleć sobie jakie mamy układy współrzędnych.

Tak więc rysując ręke rysujemy ramię (najprostsza wersja linią) od punktu (0,0) do (długość_ramienia,0) przesuwamy układ współrzędnych do łokcia wykonujemy obrót taki jak zgięcie łokcia i rysujemy przedramię, a później podobnie dłoń. Aby narysować całego człowieka przed rysowaniem ręki odpowiednio przesuwamy układ współrzędnych i dokonujemy obrotu odpowiedniego do położenia ręki. Pamiętamy dla człowieka jego pozycje i pewną ilość kątów, które mogą być obliczane z klatki na klatkę proceduralnie zakładająć, że kąty zmieniają się w pewnym zakresie i używając funcji okresowych sin/cos. Możemy też kąty dla poszczególnych faz ruchu pamiętać w tablicy i dla animacji pobierać je i pomiędzy interpolować liniowo. Warto eksperymenotwać i stworzyć kilka tablic opisujących różne sposoby biegu/chodu lub proceduralnie zmieniać parametry.

Animacja Tłumu: Symulacja tłumu polega na renderowaniu grupy ludzi animowanych jak wyżej, dla każdego pamiętamy pozycje, kierunek, faze ruchu,... Poszczególne osoby mogą się różnić szybkościa lub innymi parametrami ruchu, można eksperymentować z dziwnymi rodzajami chodu lub biegu. Warunki początkowe mogą być losowe (tu dobrze dodać proste kolizje) lub start biegu, można też dodać jakieś źródło ludzi, czyli miejsce gdzie pojawiają się na scenie w losowych odstępach czasu.

Widoki: Okno programu powinien wypełniać jeden z trzech przełączalnych (klawisz v) widoków: widok z punktu widzenia wyróżnionej idącej/biegnącej osoby (tu wysokość może się zmieniać: zależy od animacji), widok podązający za nią: kilka metrów za i powyżej (na stałej wysokości), widok perspektywiczny z góry na całą scenę (do ustalenia ale stały).

PS: Inspiracją mogą być animacje ze stron: Basic Walk Cycle, netanimations.net. Przykładowo poniższe, chodź w tym zadaniu celem nie jest zadbanie o aż taką szczegółowość i jakość biegu.